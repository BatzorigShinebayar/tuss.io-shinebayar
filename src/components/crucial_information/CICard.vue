<template>  <div    id="weekly-ach"    class="card bg-deep-blue"    :class="{      'bg-white': sent === false && confirm === false,    }"    :style="[type === 'employee' ? { height: '350px' } : { height: '400px' }]"  >    <div id="title" class="flex-space-between">      <div class="align-self-center">        <h4>{{ name }}</h4>      </div>      <div class="float-right">        <small class="subtext text-muted ws-nowrap">Date of submission</small>        <br />        <small          :class="{ 'color-white': sent === false && confirm === false }"          class="subtext ws-nowrap"          >{{ week.check_date }}</small        >      </div>    </div>    <div v-if="created && !sent && !confirm" class="my-auto">      <img        src="@/assets/images/landing-page/Frame.png"        width="100%"        height="179px"        alt      />      <div class="d-flex justify-content-center">        <button          type="button"          class="btn button mt-4"          @click="toggleSidebar(week.dailycheck_id, week.check_date)"        >          Fill My Daily Checkin Form        </button>      </div>    </div>    <div v-else-if="sent || confirm">      <div v-if="type !== 'employee'" class="d-block">        <div class="text-muted ws-nowrap d-flex justify-content-center">          <label>Submission Rate</label>        </div>        <div class="d-flex justify-content-center ws-nowrap">          <h4>            {{ week.submission_rate }}          </h4>        </div>      </div>      <div class="flex-space-between element">        <div class="text-muted ws-nowrap">          <label>Гүйцэтгэсэн Үе шат</label>        </div>        <div class="float-right align-self-center ws-nowrap">          <h4>            {{ week.completed_task_stages }}            <i              class="bx bxs-check-circle font-size-16 align-middle color-green"            />          </h4>        </div>      </div>      <div class="flex-space-between element">        <div class="text-muted ws-nowrap">          <label>Achievement point</label>        </div>        <div class="float-right align-self-center ws-nowrap">          <h4>            {{ week.achievement_points }}            <i              v-if="!checkInclude(week.achievement_points)"              class="bx bxs-check-circle font-size-16 align-middle color-green"            />            <i              v-else              class="bx bxs-check-circle font-size-16 align-middle color-red"            />          </h4>        </div>      </div>      <div class="flex-space-between element">        <div class="text-muted ws-nowrap">          <label>Reports and reminders</label>        </div>        <div class="float-right align-self-center ws-nowrap">          <h4>            {{ week.reports_and_reminders }}            <i              v-if="week.reports_and_reminders === 0"              class="bx bxs-check-circle font-size-16 align-middle color-green"            />            <i              v-else              class="bx bxs-check-circle font-size-16 align-middle color-orange"            />          </h4>        </div>      </div>      <div class="flex-space-between element">        <div class="text-muted ws-nowrap">          <label>Conflict</label>        </div>        <div class="float-right align-self-center ws-nowrap">          <h4>            {{ week.conflicts_and_problems }}            <i              v-if="week.conflicts_and_problems === 0"              class="bx bxs-check-circle font-size-16 align-middle color-green"            />            <i              v-else              class="bx bxs-check-circle font-size-16 align-middle color-red"            />          </h4>        </div>      </div>      <div class="flex-space-between element">        <div class="ws-nowrap">          <label class="text-muted ws-nowrap">State</label>          <h5 v-if="week.is_conclusion_abnormal" class="color-red">            <i class="bx bxs-check-circle font-size-16 align-middle" /> Not            okay!          </h5>          <h5 v-else class="color-green">            <i class="bx bxs-check-circle font-size-16 align-middle" /> Okay!          </h5>        </div>        <div class="float-right align-self-center">          <router-link            class="btn"            :event="canRead ? 'click' : ''"            :to="{              name: 'crucialInfo04Perf',              params: { date: week.check_date },            }"          >            <button type="button" class="btn button">Details</button>          </router-link>        </div>      </div>    </div>    <div v-else class="my-auto">      <img        src="@/assets/images/landing-page/Saturn.png"        width="100%"        height="179px"        alt      />      <div class="d-flex justify-content-center">        <button type="button" disabled class="btn button mt-4">          Fill My Daily Checkin Form        </button>      </div>    </div>  </div></template><script>export default {  name: 'CICard',  props: {    week: {      type: Object,      default: null,    },    name: {      type: String,      default: () => '',    },    type: {      type: String,      default: () => '',    },  },  data() {    return {      created: false,      sent: false,      confirm: false,      canRead: this.permission('ach4_red'),      canUpd: this.permission('ach4_upd'),    };  },  mounted() {    const submissionRate = this.week.submission_rate;    const subRateList = submissionRate.split('/');    if (parseInt(subRateList[0]) !== 0) {      this.created = true;    }    if (parseInt(subRateList[1]) !== 0) {      this.sent = true;    } else if (this.type !== 'employee' && this.created) {      this.sent = true;    }    if (parseInt(subRateList[2]) !== 0) {      this.confirm = true;    }  },  methods: {    async get_daily_check_create_data(params) {      const response = await this.$store.dispatch(        'get_daily_check_create_data',        params      );      if (response.status === 200) {        return response.data;      }    },    async toggleSidebar(data, date) {      if (this.canUpd) {        this.$store.dispatch('dailyCheckId', data);        const params = data + '/';        const response = await this.get_daily_check_create_data(params);        if (response) {          const dailyCheckJsonData = response;          this.$store.dispatch('dailyCheckCreate', dailyCheckJsonData);          if (dailyCheckJsonData.employee_check.json_data !== null) {            const employeeCheckData =              dailyCheckJsonData.employee_check.json_data;            this.$store.dispatch('dailyCheckData', employeeCheckData);          } else {            const jsonData = {              dailycheck_id: data,              date,              employee: parseInt(this.$route.params.id),              state: '',              user_id: this.$store.getters.user.id,              is_conclusion_abnormal: false,              system_problems: [],              problems: [],              achievements: [],              reminders: [],            };            // this.$store.state['daily_check_data'] = jsonData;            this.$store.dispatch('dailyCheckData', jsonData);          }          this.$store.dispatch('CICreateSideMenuToggle', true);        }      }    },    checkInclude(data) {      if (data[0] === '-') {        return true;      } else {        return false;      }    },  },};</script><style scoped>#weekly-ach {  width: 262px !important;  /*height: 347px !important;*/}.card {  color: #ffffff;}</style>