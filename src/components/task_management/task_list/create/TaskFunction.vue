<template>  <b-form-group label="Function">    <treeselect      v-model="selected"      :options="options"      :multiple="false"      :clearable="false"      :disable-branch-nodes="true"      :normalizer="normalizer"      @input="change"    >      <label slot="option-label" slot-scope="{ node }">        <strong>{{ node.raw.code }}</strong> {{ node.raw.name }}      </label>      <div slot="value-label" slot-scope="{ node }">        <strong>{{ node.raw.code }}</strong> {{ node.raw.name }}      </div>    </treeselect>    <p v-if="!$v.selected.required && formSubmit" class="text-danger mb-4">      Function is required    </p>  </b-form-group></template><script>import Treeselect from '@riophae/vue-treeselect';import { required } from 'vuelidate/lib/validators';export default {  name: 'TaskFunction',  components: {    Treeselect,  },  props: {    formSubmit: Boolean,    defaultValue: {      type: Number,      default() {        return null;      },    },  },  data() {    return {      selected: null,      normalizer(node) {        let nodeId;        if (node.sub_function) {          nodeId = Math.random();        } else {          nodeId = node.id;        }        return {          id: nodeId,          label: node.name,          children: node.sub_function,        };      },    };  },  computed: {    options() {      const optionList = [];      for (const subFunction of this.$store.getters.company.function) {        if (subFunction.is_active === '1') {          optionList.push(subFunction);        }      }      return optionList;    },  },  watch: {    defaultValue() {      this.loadDefault();    },  },  validations: {    selected: { required },  },  mounted() {    this.loadDefault();  },  methods: {    loadDefault() {      if (this.defaultValue) {        this.selected = this.defaultValue;      }    },    change() {      this.$emit('getFunction', this.selected);    },  },};</script>