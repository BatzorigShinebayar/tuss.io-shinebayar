<template>  <b-form-group class="mb-4" label="Task executor">    <treeselect      v-model="selected"      :options="options"      :multiple="false"      :clearable="false"      :disable-branch-nodes="true"      :value-consists-of="'LEAF_PRIORITY'"      @input="change"    >    </treeselect>    <p v-if="!$v.selected.required && formSubmit" class="text-danger mb-4">      Task executor is required    </p>  </b-form-group></template><script>import Treeselect from '@riophae/vue-treeselect';import { required } from 'vuelidate/lib/validators';export default {  name: 'TaskExecutor',  components: {    Treeselect,  },  props: {    formSubmit: Boolean,    defaultValue: {      type: Number,      default() {        return null;      },    },  },  data() {    return {      selected: null,    };  },  computed: {    options() {      const options = this.$store.getters.company.employees;      const allDepartments = this.$store.getters.company.department;      const activeDepartments = [];      for (const department of allDepartments) {        if (department.is_active === '1') {          const employees = [];          for (const emp of options) {            if (emp.department__id === department.id) {              if (emp.is_active === '1') {                const employeeContext = {                  id: emp.partner__id,                  label: emp.partner__name + ' ' + emp.partner__last_name,                };                employees.push(employeeContext);              }            }          }          const departmentContext = {            id: department.id + 'dep',            label: department.name,            children: employees,          };          activeDepartments.push(departmentContext);        }      }      return activeDepartments;    },  },  watch: {    default() {      this.loadDefault();    },  },  validations: {    selected: { required },  },  mounted() {    this.loadDefault();  },  methods: {    loadDefault() {      if (this.defaultValue) {        this.selected = this.defaultValue;      } else {        this.selected = this.$store.getters.user.partner_id;      }    },    change() {      this.$emit('getExecutor', this.selected);    },  },};</script>