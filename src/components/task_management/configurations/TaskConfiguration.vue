<template>  <div>    <div class="row">      <div class="col-lg-4 my-4">        <div          class="bg-deep-blue card flex-space-between mini-stats-wid"          style="min-width: 340px"        >          <div class="card-body">            <div class="d-inline">              <div class="text-white d-block">                <h4 id="title">Task Configuration</h4>                <p class="subtext pt-3 w-50">                  From here you can make adjustments and changes to your tasks                  and plan!                </p>              </div>              <img                id="astronaut"                src="@/assets/images/background/astronaut.png"                alt="astronaut"              />            </div>          </div>        </div>      </div>      <div class="col-lg-8 my-4">        <ConfigurationDashboard />      </div>    </div>    <div class="d-flex justify-content-between">      <div class="d-flex">        <b-button class="mr-3" variant="secondary" disabled>          <Fa :icon="['fas', 'filter']" /> Filter        </b-button>      </div>    </div>    <b-table      striped      :hover="true"      :items="tableData"      :fields="tableField"      :head-variant="'deep-blue'"      :responsive="true"      class="mt-4"    >      <template #cell(selected)="row">        <b-form-checkbox          v-model="row.item.selected"          @input="cellSelect($event, row.item.id)"        />      </template>      <template #cell(name)="data">        <router-link          :to="{            name: 'task-configurations-detail',            params: { id: data.item.id },          }"        >          {{ data.item.name }}        </router-link>      </template>      <template #cell(employee)="data">        <div class="text-nowrap">          {{ data.item.employee | employee(emps) }}        </div>      </template>      <template #cell(created_date)="data">        <div class="text-nowrap">          {{ data.item.created_date | dayDate }}        </div>      </template>      <template #cell(state)="data">        <h5 class="d-block">          <b-badge v-if="data.item.state === 'sent'" variant="warning">            {{ data.item.state }}          </b-badge>          <b-badge v-else-if="data.item.state === 'draft'" variant="danger">            {{ data.item.state }}          </b-badge>          <b-badge v-else variant="success">            {{ data.item.state }}          </b-badge>        </h5>      </template>    </b-table>    <div class="d-flex justify-content-center mt-4">      <b-pagination        v-if="coordinateCount > 0"        v-model="coordinatePage"        pills        :total-rows="coordinateCount"        :per-page="50"        @change="taskPagination"      ></b-pagination>    </div>    <p class="text-right mb-5">Total: {{ coordinateCount }}</p>  </div></template><script>import ConfigurationDashboard from '@/components/task_management/configurations/ConfigurationDashboard';export default {  name: 'TaskConfiguration',  components: {    ConfigurationDashboard,  },  filters: {    employee(value, emps) {      for (const emp of emps) {        if (emp.partner__id === value) {          value = emp.partner__name + ' ' + emp.partner__last_name;        }      }      return value;    },    dayDate(value) {      const day = new Date(value);      return day.toISOString().slice(0, 10);    },  },  data() {    return {      modalData: {        department: null,        employee: null,        date: null,        reason: null,        id: null,        index: null,        data: null,      },      isCreating: false,      canReject: true,      canConfirm: true,      tableData: null,      tableField: [        {          key: 'selected',          label: '',          sortable: false,        },        {          key: 'name',          label: 'Name',          sortable: true,        },        {          key: 'employee',          label: 'Employee',          sortable: true,        },        {          key: 'created_date',          label: 'Date',          sortable: true,        },        {          key: 'state',          label: 'Status',          sortable: true,        },      ],      coordinatePage: 1,      coordinateCount: 0,      tableFieldSelected: [],      emps: this.$store.getters.company.employees,    };  },  mounted() {    this.tableLoad(1);  },  methods: {    tableLoad(page) {      const activeCompany = this.$store.getters.activeCompany;      const urlData =        activeCompany + '/' + `?active=1&page=${page}&ordering=-created_date`;      this.getTaskCoordination(urlData);    },    async getTaskCoordination(params) {      const response = await this.$store.dispatch(        'getTaskCoordination',        params      );      if (response.status === 200) {        this.tableData = response.data.results;        this.coordinateCount = response.data.total;        this.coordinatePage = response.data.page;        window.scrollTo(0, 0);      }    },    taskPagination(page) {      this.coordinatePage = page;      this.tableLoad(page);    },    cellSelect(status, item) {      if (status) {        this.tableFieldSelected.push(item);      } else {        const removeIndex = this.tableFieldSelected.indexOf(item);        if (removeIndex > -1) {          this.tableFieldSelected.splice(removeIndex, 1);        }      }    },    isMyAch() {      return true;    },  },};</script><style scoped></style>