<template>  <b-sidebar    id="create-sub-function"    title="Add Sub-function"    class="sidebar-md"    right    shadow    backdrop    lazy  >    <div class="p-3">      <b-form>        <h5>{{ functionInfo.name }}</h5>        <p class="mt-2 mb-4">          Type:          <b-badge variant="deep-blue">            {{ functionInfo.code }}          </b-badge>        </p>        <b-form-group          label="Sub-function Name"          label-for="add-sub-function-name"        >          <b-form-input            id="add-sub-function-name"            v-model="name"            type="text"          ></b-form-input>          <span v-if="!this.$v.name.required && formSubmit" class="text-danger">            Sub-function Name is required          </span>        </b-form-group>        <b-form-group          label="Code"          label-for="add-sub-function-code"          :description="functionInfo.code + '-X'"        >          <b-form-input            id="add-sub-function-code"            v-model="code"            type="text"          ></b-form-input>          <span v-if="!this.$v.code.required && formSubmit" class="text-danger">            Code is required          </span>        </b-form-group>        <b-form-group          label="Sub function Sequence"          label-for="add-sub-function-sequence"        >          <b-form-input            id="add-sub-function-sequence"            v-model="sequence"            type="number"          ></b-form-input>        </b-form-group>      </b-form>    </div>    <template #footer="{ hide }">      <div class="m-3">        <b-button          type="submit"          variant="deep-blue"          block          size="lg"          @click="createFunction(hide)"          >Add        </b-button>      </div>    </template>  </b-sidebar></template><script>import { required } from 'vuelidate/lib/validators';export default {  name: 'CreateSubFunction',  props: {    functionInfo: {      type: [Array, Object],      default() {        return [];      },    },  },  data() {    return {      name: null,      code: null,      formSubmit: false,      sequence: null,    };  },  validations: {    name: { required },    code: { required },  },  watch: {    functionInfo(data) {      const sunFunc = data.sub_function;      this.sequence = sunFunc[sunFunc.length - 1].sequence + 1;    },  },  methods: {    async createFunction(hide) {      this.formSubmit = true;      this.$v.$touch();      if (!this.$v.$invalid) {        const jsonData = {          name: this.name,          code: this.code,          function_type_id: this.functionInfo.function_type,          function_id: this.functionInfo.id,          created_user: this.$store.getters.user.id,          updated_user: this.$store.getters.user.id,          created_date: new Date(),          updated_date: new Date(),          sequence: this.sequence,        };        const params = {          urlParam: '',          urlData: jsonData,        };        const response = await this.$store.dispatch('postSubFunction', params);        if (response.status === 200) {          hide();          this.$root.$emit('bv::show::modal', 'function-modal');          this.$emit('reload', true);        }      }    },  },};</script>