<template>  <b-sidebar    id="edit-function"    ref="editFunction"    title="Edit function"    class="sidebar-md"    right    shadow    backdrop    lazy  >    <div class="p-3">      <b-form>        <b-form-group label="Function Name" label-for="add-function-name">          <b-form-textarea            id="add-function-name"            v-model="name"            rows="5"          ></b-form-textarea>          <span v-if="!this.$v.name.required && formSubmit" class="text-danger">            Function Name is required          </span>        </b-form-group>        <b-form-group label="Code" label-for="add-function-code">          <b-form-input            id="add-function-code"            v-model="code"            type="text"          ></b-form-input>          <span v-if="!this.$v.code.required && formSubmit" class="text-danger">            Code is required          </span>        </b-form-group>        <b-form-group          label="Function Sequence"          label-for="add-function-sequence"        >          <b-form-input            id="add-function-sequence"            v-model="sequence"            type="number"          ></b-form-input>        </b-form-group>      </b-form>      <b-button        v-b-modal.function-delete        variant="danger"        block        class="mt-5"        v-if="funcDel"        >Delete</b-button      >      <b-modal id="function-delete" title="">        <h4 class="text-center mb-2">Are you sure to delete?</h4>        <h5 class="text-center">{{ name }}</h5>        <template #modal-footer>          <div class="w-100 d-flex justify-content-center mb-4">            <b-button              variant="secondary"              class="mr-3"              size="lg"              @click="closeModal"              >No</b-button            >            <b-button variant="danger" size="lg" @click="deleteSubFunction"              >Yes</b-button            >          </div>        </template>      </b-modal>    </div>    <template #footer="{ hide }">      <div class="m-3">        <b-button          type="submit"          variant="deep-blue"          block          size="lg"          @click="createFunction(hide)"          >Edit        </b-button>      </div>    </template>  </b-sidebar></template><script>import { required } from 'vuelidate/lib/validators';export default {  name: 'FunctionEdit',  props: {    functionEdit: {      type: [Array, Object],      default() {        return [];      },    },  },  data() {    return {      name: this.functionEdit.name,      code: this.functionEdit.code,      sequence: this.functionEdit.sequence,      formSubmit: false,      funcDel: this.permission('func_del'),    };  },  watch: {    functionEdit(newVal) {      this.name = newVal.name;      this.code = newVal.code;      this.sequence = newVal.sequence;    },  },  validations: {    name: { required },    code: { required },  },  methods: {    async createFunction(hide) {      this.formSubmit = true;      this.$v.$touch();      if (!this.$v.$invalid) {        const jsonData = {          name: this.name,          code: this.code,          sequence: this.sequence,          id: this.functionEdit.id,          updated_user: this.$store.getters.user.id,          updated_date: new Date(),        };        const params = {          urlParam: this.functionEdit.id + '/',          urlData: jsonData,        };        const response = await this.$store.dispatch('postFunction', params);        if (response.status === 200) {          hide();          this.$emit('reload', true);        }      }    },    async deleteSubFunction() {      const jsonData = {        is_active: '0',        id: this.functionEdit.id,        updated_user: this.$store.getters.user.id,        updated_date: new Date(),      };      const params = {        urlParam: this.functionEdit.id + '/',        urlData: jsonData,      };      const response = await this.$store.dispatch('postFunction', params);      if (response.status === 200) {        this.$refs.editFunction.hide();        this.$bvModal.hide('function-delete');        this.$emit('reload', true);      }    },    closeModal() {      this.$bvModal.hide('function-delete');    },  },};</script>