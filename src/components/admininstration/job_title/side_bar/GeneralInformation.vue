<template>  <div>    <b-col class="mt-1" cols="12">      <div        class="card flex-space-between mini-stats-wid bg-deep-blue"        style="min-width: 340px"      >        <div class="card-body">          <div class="d-flex">            <div class="text-white d-block">              <h4 class="font-weight-bold mb-3">                {{ type === 'create' ? 'Creating new' : 'Edit your' }}                job Title!              </h4>              <p class="pt-3 w-75">                Please input required information below to                {{ type === 'create' ? 'creating new' : 'edit your' }} job title                to your company.              </p>            </div>            <img              id="astronaut"              src="@/assets/images/background/astronaut2.png"              alt="astronaut"            />          </div>        </div>      </div>    </b-col>    <b-col cols="12">      <b-form class="d-block mt-3">        <b-form-group label="Job title short name" label-for="short_name">          <b-form-input            id="short_name"            v-model="sideBarData.short_name"            type="text"            required            @change="changed"          ></b-form-input>          <p id="short_name_warning_" style="display: none" class="color-red">            Please insert job title short name!          </p>        </b-form-group>        <b-form-group label="Job title name" label-for="name">          <b-form-input            id="name"            v-model="sideBarData.name"            type="text"            required            @change="changed"          ></b-form-input>          <p id="name_warning_" style="display: none" class="color-red">            Please insert job title name!          </p>        </b-form-group>        <b-form-group label="Job title description" label-for="description">          <b-form-input            id="description"            v-model="sideBarData.description"            type="text"            required            @change="changed"          ></b-form-input>          <p id="description_warning_" style="display: none" class="color-red">            Please insert job title description!          </p>        </b-form-group>        <b-form-group label="Department/Unit" :label-for="'department'">          <b-form-radio-group            v-model="sideBarData.department_id"            :options="departments"            class="mr-2"            name="radio-btn"            button            @change="changed"          >          </b-form-radio-group>          <p id="department_warning_" style="display: none" class="color-red">            Please choose department/unit!          </p>        </b-form-group>        <b-form-group          label="Job title salary category"          label-for="salaryCategory"        >          <multiselect            id="salaryCategory"            v-model="sideBarData.salary_category"            :options="salaryCategories"            placeholder="- Choose -"            label="name"            track-by="id"            @select="changed"          ></multiselect>          <p            id="salaryCategory_warning_"            style="display: none"            class="color-red"          >            Please choose salary category!          </p>        </b-form-group>        <b-form-group label="Mentoring job title" :label-for="'mentorJobTitle'">          <multiselect            :id="'mentorJobTitle'"            v-model="sideBarData.parent"            :options="mentorJobTitle"            placeholder="- Choose -"            label="name"            track-by="id"            @select="changed"          ></multiselect>        </b-form-group>      </b-form>      <b-button        v-b-modal.delete-jbtt        variant="danger"        block        class="mt-5"        v-if="jbttDel"        >Delete</b-button      >    </b-col>    <b-modal id="delete-jbtt" ref="delete-jbtt" title="">      <h4 class="text-center mb-2">Are you sure to delete?</h4>      <h5 class="text-center">{{ sideBarData.name }}</h5>      <template #modal-footer="{ close }">        <div class="w-100 d-flex justify-content-center mb-4">          <b-button variant="secondary" class="mr-3" size="lg" @click="close"            >No</b-button          >          <b-button variant="danger" size="lg" @click="deleteJbtt()"            >Yes</b-button          >        </div>      </template>    </b-modal>  </div></template><script>import Multiselect from 'vue-multiselect';export default {  name: 'PermissionConfiguration',  components: {    Multiselect,  },  props: {    type: {      type: String,      default() {        return '';      },    },    data: {      type: Object,      default: null,    },  },  data() {    return {      sideBarData: {},      mentorJobTitle: [],      departments: [],      isChanged: false,      salaryCategories: [],      jbttDel: this.permission('jbtt_del'),    };  },  watch: {    mentorJobTitle(data) {      if (this.sideBarData.parent) {        for (const i in data) {          if (data[i].id === this.sideBarData.parent) {            this.sideBarData.parent = data[i];          }        }      }    },    salaryCategories(data) {      if (this.sideBarData.salary_category) {        for (const i in data) {          if (data[i].id === this.sideBarData.salary_category) {            this.sideBarData.salary_category = data[i];          }        }      }    },    isChanged() {      const val = this.sideBarData;      if (this.type === 'edit') {        this.$emit('general_data', val);      } else {        if (!val.name) {          document.getElementById('name_warning_').style.display = '';        } else {          document.getElementById('name_warning_').style.display = 'none';        }        if (!val.short_name) {          document.getElementById('short_name_warning_').style.display = '';        } else {          document.getElementById('short_name_warning_').style.display = 'none';        }        if (!val.description) {          document.getElementById('description_warning_').style.display = '';        } else {          document.getElementById('description_warning_').style.display =            'none';        }        if (!val.department_id) {          document.getElementById('department_warning_').style.display = '';        } else {          document.getElementById('department_warning_').style.display = 'none';        }        if (!val.salary_category) {          document.getElementById('salaryCategory_warning_').style.display = '';        } else {          document.getElementById('salaryCategory_warning_').style.display =            'none';        }        if (          val.name &&          val.short_name &&          val.description &&          val.department_id &&          val.salary_category        ) {          this.$emit('general_data', val);        }      }    },  },  beforeMount() {    this.sideBarData = {};    this.sideBarData = this.data.item;    const department = this.$store.getters.company.department;    for (const i in department) {      if (department[i].is_active === '1') {        this.departments.push({          text: department[i].short_name,          value: department[i].id,        });      }    }    const param = `?is_active=1&page_size=1000&organization=      ${this.$store.getters.activeCompany}`;    this.getCompanyJobTitles(param);    this.getSalaryCategory(param);  },  methods: {    async postJobTitle(params) {      const response = await this.$store.dispatch('postJobTitle', params);      if (response.status === 200) {        this.$refs['delete-jbtt'].hide();      }    },    deleteJbtt() {      const params = {        urlParams: this.data.item.id + '/',        urlData: {          id: this.data.item.id,          is_active: '0',          updated_date: new Date(),          updated_user: this.$store.getters.user.id,        },      };      this.postJobTitle(params);    },    changed() {      this.isChanged = !this.isChanged;    },    async getSalaryCategory(params) {      const response = await this.$store.dispatch('getSalaryCategory', params);      if (response.status === 200) {        this.salaryCategories = response.data.results;      }    },    async getCompanyJobTitles(params) {      const response = await this.$store.dispatch(        'getCompanyJobTitles',        params      );      if (response.status === 200) {        this.mentorJobTitle = response.data.results;      }    },  },};</script><style scoped>.card {  height: 160px;}#astronaut {  position: absolute;  right: 20px;  top: -17px;}#title {  font-weight: bold;  font-size: 18px;  line-height: 20px;}</style>