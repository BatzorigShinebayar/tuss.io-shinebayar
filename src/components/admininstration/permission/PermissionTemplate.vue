<template>  <div class="mt-4">    <div class="d-flex justify-content-between mb-4">      <b-input-group class="search-form">        <template #append>          <b-input-group-text>            <Fa :icon="['fas', 'search']" />          </b-input-group-text>        </template>        <b-form-input          id="search-task"          v-model="searchData"          placeholder="Template name"        ></b-form-input>      </b-input-group>      <b-button v-b-toggle.sideBarPermTemp variant="deep-blue" @click="create">        <Fa :icon="['fas', 'plus']" />        Create new permission template      </b-button>    </div>    <b-table      id="PermissionTemplate"      ref="PermissionTemplate"      striped      :fields="tableField"      :items="tableData"    >      <template #cell(sequence)="props">        {{ props.index + 1 }}      </template>      <template #cell(action)="props">        <a          class="cursor-pointer"          v-b-toggle.sideBarPermTemp          @click="edit(props)"        >          <Fa :icon="['fas', 'cog']" />          Edit        </a>      </template>    </b-table>    <b-sidebar      id="sideBarPermTemp"      title="Permission template"      right      shadow      backdrop      v-model="sideBarChecker"      lazy      class="sidebar-lg"    >      <PermissionTemplate :type="sideBarType" :data="sideBarData" />    </b-sidebar>  </div></template><script>import PermissionTemplate from '@/components/admininstration/permission/PermissionTemplateEdit';export default {  name: 'PermTemplTable',  components: {    PermissionTemplate,  },  data() {    return {      searchData: '',      tableField: [        {          key: 'sequence',          label: '',        },        {          key: 'name',          label: 'Template name',          sortable: true,        },        {          key: 'action_allowed',          label: 'Actions allowed',          sortable: true,        },        {          key: 'action',          label: 'Action',        },      ],      permissionTemplate: [],      tableData: [],      salaryCategory: [],      sideBarType: '',      sideBarData: null,      sideBarChecker: false,    };  },  watch: {    sideBarChecker(data) {      if (!data) {        const param = `?is_active=1&page_size=1000&organization=      ${this.$store.getters.activeCompany}`;        this.getPermissionTemplate(param);      }    },    searchData(data) {      if (data) {        this.tableData = [];        for (const i in this.permissionTemplate) {          const name = this.permissionTemplate[i].name;          if (name.toLowerCase().includes(data)) {            this.tableData.push(this.permissionTemplate[i]);          }        }      } else {        this.tableData = this.permissionTemplate;      }    },  },  beforeMount() {    const param = `?is_active=1&page_size=1000&organization=      ${this.$store.getters.activeCompany}`;    this.getPermissionTemplate(param);  },  methods: {    async getPermissionTemplate(params) {      this.permissionTemplate = null;      this.tableData = null;      const response = await this.$store.dispatch(        'getPermissionTemplate',        params      );      if (response.status === 200) {        this.permissionTemplate = response.data.results;        this.tableData = this.permissionTemplate;      }    },    create() {      this.sideBarType = 'create';      this.sideBarData = { name: '', data: {}, is_data: false };    },    edit(data) {      this.sideBarType = 'edit';      this.sideBarData = data;    },  },};</script>