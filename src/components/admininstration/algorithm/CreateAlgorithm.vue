<template>  <div>    <b-sidebar      id="algorithm-create"      title="Add new algorithm"      right      shadow      backdrop      lazy      class="sidebar-md"      @hidden="clearData"    >      <div class="p-4">        <ContentHeader>          <template #text>            <h4 class="font-weight-bold mb-3">              Welcome to your new workspace!            </h4>            <p>              Welcome to our planet TUS D+. We have so much in store for you and              your company. So, letâ€™s jump start your journey with a tutorial!            </p>          </template>          <template #image>            <img              src="@/assets/images/administration/add-employee.svg"              class="content-header-image"              alt=""            />          </template>        </ContentHeader>        <b-form>          <b-row>            <b-col lg="3">              <b-form-group label="Code" label-for="add-algorithm-code">                <b-form-input                  id="add-aglorithm-code"                  v-model="code"                  type="text"                  required                  name="code"                ></b-form-input>                <span                  v-if="!this.$v.code.required && formSubmit"                  class="text-danger"                >                  Code is required                </span>              </b-form-group>            </b-col>            <b-col lg="9">              <b-form-group                label="Algorithm name"                label-for="add-algorithm-name"              >                <b-form-input                  id="add-algorithm-name"                  v-model="name"                  type="text"                  required                  name="name"                ></b-form-input>                <span                  v-if="!this.$v.name.required && formSubmit"                  class="text-danger"                >                  Name is required                </span>              </b-form-group>            </b-col>            <b-col lg="12">              <b-form-group                label="Algorithm description"                label-for="add-algorithm-description"              >                <b-textarea                  id="add-algorithm-description"                  v-model="description"                  rows="3"                  name="description"                ></b-textarea>                <span                  v-if="!this.$v.description.required && formSubmit"                  class="text-danger"                >                  Description is required                </span>              </b-form-group>            </b-col>            <b-col lg="6">              <b-form-group                label="Order number"                label-for="add-algorithm-order-number"              >                <b-form-input                  id="add-algorithm-order-number"                  v-model="order_no"                  type="text"                  required                  name="order_no"                ></b-form-input>                <span                  v-if="!this.$v.order_no.required && formSubmit"                  class="text-danger"                >                  Order number is required                </span>              </b-form-group>            </b-col>            <b-col lg="6">              <b-form-group label="Date" label-for="add-algorithm-date">                <b-form-input                  id="add-algorithm-date"                  v-model="date"                  type="date"                  required                  name="date"                ></b-form-input>                <span                  v-if="!this.$v.date.required && formSubmit"                  class="text-danger"                  >Order date is required</span                >              </b-form-group>            </b-col>          </b-row>        </b-form>      </div>      <template #footer>        <div class="m-3">          <b-button            type="submit"            variant="deep-blue"            size="lg"            block            @click="createAlgorithm"            >Create          </b-button>        </div>      </template>    </b-sidebar>    <MessageBox>      <h4 class="text-center">Algorithm created</h4>    </MessageBox>  </div></template><script>import ContentHeader from '@/components/admininstration/ContentHeader';import { required } from 'vuelidate/lib/validators';import MessageBox from '@/components/shared_elements/MessageBox';import axios from 'axios';export default {  name: 'CreateAlgorithm',  components: { ContentHeader, MessageBox },  data() {    return {      code: null,      name: null,      description: null,      order_no: null,      date: null,      formSubmit: false,    };  },  validations: {    code: { required },    name: { required },    description: { required },    order_no: { required },    date: { required },  },  beforeMount() {    this.setDepartment();  },  methods: {    setDepartment() {      const departments = this.$store.getters.company.department;      const list = [];      for (const department of departments) {        list.push({ text: department.short_name, value: department.id });      }      this.departments = list;    },    setJobTitles() {      const allJobs = this.$store.getters.company.job_title;      const list = [];      for (const job of allJobs) {        const jobDepartment = job.department;        if (jobDepartment === this.selectedDepartment) {          list.push({            text: job.name,            value: job.id,          });        }      }      this.jobTitles = list;      this.selectedJobTitle = this.jobTitles[0].value;    },    createAlgorithm() {      this.formSubmit = true;      this.$v.$touch();      if (!this.$v.$invalid) {        const payload = {          code: this.code,          name: this.name,          description: this.description,          number: this.order_no,          date: this.date,          organization: this.$store.getters.activeCompany,        };        const url = '/pages/company_builder/algorithm/';        axios.post(url, payload).then(() => {          this.$root.$emit('bv::toggle::collapse', 'algorithm-create');          this.$root.$emit('bv::show::modal', 'message-box');          this.$emit('reload', true);        });      }    },    clearData() {      this.code = null;      this.name = null;      this.description = null;      this.order_no = null;      this.date = null;      this.formSubmit = false;    },  },};</script>