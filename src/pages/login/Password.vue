<template>  <div class="login-panel" @mousemove="mouseMove">    <div class="login-panel-content">      <div        class="login-panel-content-background"        :style="{          backgroundPosition: mouseX + 'px ' + mouseY + 'px',        }"      >        <router-link tag="a" to="/" class="d-block">          <img            class="login-logo-img"            src="@/assets/images/tusd_logo_white.svg"            alt="TUSD+"          />        </router-link>        <img          src="@/assets/images/login/astranaut.webp"          class="login-astranaut"          alt=""        />      </div>      <div class="login-panel-content-control">        <div class="login-form">          <router-link tag="a" to="/" class="d-block">            <img              class="login-form-mobile-logo"              src="@/assets/images/tusd_logo.svg"              alt="TUSD+"            />          </router-link>          <h1 class="text-center mb-lg-4 mb-2">Forgot password</h1>          <b-alert v-if="resetError" class="mb-4" show variant="danger">            {{ resetError }}          </b-alert>          <form class="p-2 mb-3" @submit.prevent="passwordReset">            <div class="form-group">              <label for="useremail">E-mail</label>              <input                id="useremail"                v-model="email"                :class="{                  'is-invalid':                    (submitted && !this.$v.email.required) ||                    (submitted && !this.$v.email.email),                }"                type="email"                class="form-control"              />              <span                v-if="!this.$v.email.required && submitted"                class="text-danger"                >E-mail is required</span              >              <span v-if="!this.$v.email.email && submitted" class="text-danger"                >E-mail is invalid</span              >            </div>            <b-button              block              variant="dark"              class="mt-5"              type="submit"              :disabled="pending"              size="lg"            >              Recover my password            </b-button>          </form>          <b-modal            ref="message"            hide-footer            hide-header            close            @onclose="redirect"          >            <div class="d-block text-center p-3">              <h6>Check your E-Mail</h6>              <p class="pt-3 mb-0">                We sent new password to your email: {{ email }}.              </p>              <b-button                block                variant="dark"                class="mt-4"                size="lg"                @click="redirect"                >Ok              </b-button>            </div>          </b-modal>          <div class="text-center mt-4">            <router-link tag="a" :to="{ name: 'login' }" class="">              Back            </router-link>          </div>        </div>      </div>    </div>  </div></template><script>import { email, required } from 'vuelidate/lib/validators';import axios from 'axios';export default {  name: 'PasswordPage',  auth: 'guest',  data() {    return {      email: null,      resetError: false,      pending: null,      submitted: false,      mouseX: null,      mouseY: null,    };  },  validations: {    email: { required, email },  },  head() {    return {      title: 'Forgot Password | TUSS D+',    };  },  methods: {    passwordReset() {      this.submitted = true;      if (this.pending === null) {        this.pending = 'disabled';        axios          .post(`api/forgot-password/`, {            email: this.email,          })          .then((response) => {            this.pending = null;            if (response.data.error_message === 'success') {              this.$refs.message.show();            } else {              this.resetError = 'И-мэйл хаяг бүртгэлгүй байна.';            }          })          .catch((e) => {            console.error(e);          });      }    },    redirect() {      this.$router.push({ name: 'login' });    },    mouseMove(event) {      const movementStrength = 25;      const height = movementStrength / window.innerHeight;      const width = movementStrength / window.innerWidth;      const pageX = event.clientX - window.innerWidth / 2;      const pageY = event.clientY - window.innerHeight / 2;      this.mouseX = width * pageX * -1 - 25;      this.mouseY = height * pageY * -1 - 50;    },  },};</script>