<template>  <div v-if="token !== null">    <div class="wrapper--forms--entry">      <el-form>        <el-row class="section-block">          <el-col :span="15">            <el-form-item label="Бүлгийн нэр">              <el-input                :value="$store.state.form_name"                :disabled="true"              ></el-input>            </el-form-item>          </el-col>          <el-col :span="9">            <el-form-item label="Бүлгийн код">              <el-input                :value="$store.state.form_code"                :disabled="true"              ></el-input>            </el-form-item>          </el-col>        </el-row>        <template v-for="(eachFormObj, eachFormIndex) in forms">          <div :key="`div-${eachFormIndex}`" class="section-block">            <div class="source">              <el-row>                <el-col :span="2">                  <el-input                    :value="eachFormObj.code"                    style="width: 80%; margin-top: 10px"                  ></el-input>                </el-col>                <el-col :span="17">                  <el-form-item>                    <el-input :value="eachFormObj.title"></el-input>                  </el-form-item>                </el-col>                <el-col :span="5">                  <el-form-item>                    <component                      :is="eachFormObj.switch.fieldType"                      style="padding-top: 0"                      :current-field="JSON.stringify(eachFormObj.switch)"                      class="form__field"                    >                    </component>                  </el-form-item>                </el-col>              </el-row>            </div>            <div class="meta">              <el-row>                <el-col                  v-for="(field, index) in eachFormObj.fields"                  :key="index"                  v-bind="field"                  :span="field.span"                  class="form__group"                >                  <div>                    <component                      :is="field.fieldType"                      :current-field="JSON.stringify(field)"                      class="form__field"                    >                    </component>                  </div>                </el-col>              </el-row>            </div>          </div>        </template>        <el-row>          <el-button            style="margin-bottom: 10px; float: right"            type="success"            :disabled="true"            >Хадгалах          </el-button>        </el-row>      </el-form>    </div>  </div></template><script>import { FormBuilder } from '@/components/form_elements/formbuilder';import functions from '@/plugins/formFunctions';export default {  name: 'Preview',  components: FormBuilder.$options.components,  data() {    return {      token: this.$store.getters.token,      forms: [],      themingVars: this.$store.state.themingVars,    };  },  async beforeMount() {    if (this.check_token()) {      await fetch(this.$store.state.form_url + '?id=' + this.$route.query.id, {        method: 'GET',        headers: {          'Content-Type': 'application/json',          Authorization: this.token,        },      })        .then((response) => response.json())        .then((data) => this.set_state(data, 'preview'))        .catch((error) => {          console.error(error);          this.$message.error('Унших үед алдаа гарлаа!');        });    } else {      this.$message.error('Та системээс гарсан байна!');    }  },  methods: {    set_disable: functions.setDisable,    check_token: functions.checkToken,    set_state(data) {      // this.$store.state.form.emp_id = data.emp_id;      this.$store.dispatch('form/changeEmpId', data.emp_id);      // this.$store.state.form.emp_name = data.emp_name;      this.$store.dispatch('form/changeEmpName', data.emp_name);      // this.$store.state.form.emp_img = data.emp_img;      this.$store.dispatch('form/changeEmpImg', data.emp_img);      // this.$store.state.form.form_name = data.name;      this.$store.dispatch('form/changeFormName', data.name);      // this.$store.state.form.form_code = data.code;      this.$store.dispatch('form/changeFormCode', data.code);      this.forms = JSON.parse(data.form.toString());      const elements = this.forms.filter((obj) => {        return obj;      });      elements.map((t) => this.set_disable(t));    },  },};</script>