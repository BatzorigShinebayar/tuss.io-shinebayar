<template>  <MainLayout>    <NavBar>      <template #top>        <h5 class="p-3">{{ taskName }}</h5>      </template>      <template #bottom>        <b-tabs class="header-tab">          <b-tab>            <template #title>              <a class="cursor-pointer" @click="back">                <Fa :icon="['fas', 'chevron-left']" />                Back              </a>            </template>          </b-tab>          <b-tab active lazy @click="tabIndex = 0">            <template #title>              <Fa :icon="['fas', 'briefcase']" />              General            </template>          </b-tab>          <b-tab lazy @click="tabIndex = 1">            <template #title>              <Fa :icon="['fas', 'bullseye']" />              Task Goal            </template>          </b-tab>          <b-tab lazy @click="tabIndex = 2">            <template #title>              <Fa :icon="['fas', 'chart-bar']" />              Summary            </template>          </b-tab>        </b-tabs>      </template>    </NavBar>    <SubMenu>      <template #submenu>        <TaskSideMenu />      </template>    </SubMenu>    <div class="container-fluid pr-lg-4 pl-lg-4">      <b-tabs v-model="tabIndex" nav-wrapper-class="d-none">        <b-tab lazy>          <GeneralTab            v-if="ready"            :task-detail="taskDetail"            @reload="getTaskDetail"          />        </b-tab>        <b-tab lazy>          <GoalTab />        </b-tab>        <b-tab lazy>          <SummaryTab />        </b-tab>      </b-tabs>    </div>  </MainLayout></template><script>import MainLayout from '@/components/layout/MainLayout';import NavBar from '@/components/layout/NavBar';import SubMenu from '@/components/layout/SubMenu';import TaskSideMenu from '@/components/task_management/task_detail/TaskSideMenu';import GeneralTab from '@/components/task_management/task_detail/GeneralTab';import GoalTab from '@/components/task_management/task_detail/goal/GoalTab';import SummaryTab from '@/components/task_management/task_detail/summary/SummaryTab';import axios from 'axios';export default {  name: 'TaskView',  metaInfo: {    title: 'Task Management | TUSS D+',  },  components: {    MainLayout,    NavBar,    SubMenu,    TaskSideMenu,    GeneralTab,    GoalTab,    SummaryTab,  },  provide() {    const taskDetail = {};    Object.defineProperty(taskDetail, 'object', {      enumerable: true,      get: () => this.taskDetail,    });    return { taskDetail };  },  data() {    return {      taskId: null,      taskName: 'Task detail',      tabIndex: 0,      ready: false,      taskDetail: null,      taskState: null,      taskStageGroup: null,      taskGoal: null,    };  },  watch: {    $route() {      this.getTaskDetail();    },  },  created() {    this.getTaskDetail();  },  methods: {    back() {      window.history.back();    },    async getTaskDetail() {      const taskId = this.$route.query.id;      if (!taskId) {        return;      }      let noJson = false;      const url = `/pages/plan/view_task/${taskId}/`;      await axios.get(url).then((response) => {        if (          response.data.json_data &&          response.data.task_state !== 'confirm' &&          response.data.task_state !== 'finish'        ) {          this.taskName = response.data.name;          this.taskDetail = response.data;          this.taskState = response.data.task_state;          this.taskStageGroup = response.data.json_data.task_stage_groups;          this.ready = true;        } else {          noJson = true;        }      });      if (noJson) {        const newUrl = `/pages/plan/view_full_task_info/${taskId}/`;        await axios.get(newUrl).then((response) => {          this.taskName = response.data.name;          this.taskDetail = response.data;          this.taskState = response.data.task_state;          this.taskStageGroup = response.data.task_stage_groups;          this.ready = true;        });      }    },  },};</script>